<textarea id="js" cols=60 rows=10>
// This is a simple JavaScript file

let val = Math.random() + 5;
console.log("Here's a random number:", val);
</textarea>
<hr />
<strong>Output:</strong>
<pre id="output"></pre>

<script>
    var output = [];
    var Module = {
        print: d => output.push(d)
    };

    function execute(js) {
        output = [];
        FS.writeFile("/tmp/code.js", js);
        Module.callMain(["/tmp/code.js"]);
        return output;
    }

    document.addEventListener("input", function(){
        var code = document.getElementById("js").value;
        execute(code);
        document.getElementById("output").innerHTML = output.join("<br>");
    });
</script>
<script src="index.js"></script>
